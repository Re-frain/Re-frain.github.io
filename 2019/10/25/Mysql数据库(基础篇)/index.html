<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="数据库相关概念1、DB：数据库，保存一组有组织的数据的容器。​2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据，常见的DBMS为MySql,Oracle,SqlServer,DB2。。。​3、SQL:结构化查询语言，用于和DBMS通信的语言。 MySQL产品的介绍和安装MySQL服务的启动和停止​    方式一：计算机——右击管理——服务​    方式二：通过管理员身份">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql数据库（基础）">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;10&#x2F;25&#x2F;Mysql%E6%95%B0%E6%8D%AE%E5%BA%93(%E5%9F%BA%E7%A1%80%E7%AF%87)&#x2F;index.html">
<meta property="og:site_name" content="re-frain">
<meta property="og:description" content="数据库相关概念1、DB：数据库，保存一组有组织的数据的容器。​2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据，常见的DBMS为MySql,Oracle,SqlServer,DB2。。。​3、SQL:结构化查询语言，用于和DBMS通信的语言。 MySQL产品的介绍和安装MySQL服务的启动和停止​    方式一：计算机——右击管理——服务​    方式二：通过管理员身份">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-10-25T14:54:01.208Z">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/10/25/Mysql数据库(基础篇)/"/>





  <title>Mysql数据库（基础） | re-frain</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/re-frain" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">re-frain</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/10/25/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93(%E5%9F%BA%E7%A1%80%E7%AF%87)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="汐">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/timg.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="re-frain">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Mysql数据库（基础）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-10-25T21:52:16+08:00">
                2019-10-25
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/10/25/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93(%E5%9F%BA%E7%A1%80%E7%AF%87)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/10/25/Mysql%E6%95%B0%E6%8D%AE%E5%BA%93(%E5%9F%BA%E7%A1%80%E7%AF%87)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本站总阅读数 <i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  8.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  32
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h2><p>1、DB：数据库，保存一组有组织的数据的容器。<br>​2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据，常见的DBMS为MySql,Oracle,SqlServer,DB2。。。<br>​3、SQL:结构化查询语言，用于和DBMS通信的语言。</p>
<h2 id="MySQL产品的介绍和安装"><a href="#MySQL产品的介绍和安装" class="headerlink" title="MySQL产品的介绍和安装"></a>MySQL产品的介绍和安装</h2><h3 id="MySQL服务的启动和停止"><a href="#MySQL服务的启动和停止" class="headerlink" title="MySQL服务的启动和停止"></a>MySQL服务的启动和停止</h3><p>​    方式一：计算机——右击管理——服务<br>​    方式二：通过管理员身份运行<br>​    net start 服务名（启动服务）<br>​    net stop 服务名（停止服务）</p>
<h3 id="MySQL服务的登录和退出"><a href="#MySQL服务的登录和退出" class="headerlink" title="MySQL服务的登录和退出"></a>MySQL服务的登录和退出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">方式一：通过mysql自带的客户端</span><br><span class="line">只限于root用户</span><br><span class="line"></span><br><span class="line">方式二：通过windows自带的客户端</span><br><span class="line">登录：</span><br><span class="line">mysql 【-h主机名 -P端口号 】-u用户名 -p密码</span><br><span class="line">例如： mysql -u root -p123456</span><br><span class="line">退出：</span><br><span class="line">exit或ctrl+C</span><br></pre></td></tr></table></figure>



<h3 id="MySQL的常见命令"><a href="#MySQL的常见命令" class="headerlink" title="MySQL的常见命令"></a>MySQL的常见命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">1.查看当前所有的数据库</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line">2.打开指定的库</span><br><span class="line">use 库名;</span><br><span class="line"></span><br><span class="line">3.查看当前库的所有表</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">4.查看其它库的所有表</span><br><span class="line">show tables from 库名;</span><br><span class="line"></span><br><span class="line">5.创建表</span><br><span class="line">create table 表名(</span><br><span class="line">	列名 列类型，</span><br><span class="line">	...</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">6.查看表结构</span><br><span class="line">desc 表名;</span><br><span class="line"></span><br><span class="line">7.查看服务器的版本</span><br><span class="line">方式一：登录到mysql服务端</span><br><span class="line">select version();</span><br><span class="line"></span><br><span class="line">方式二：没有登录到mysql服务端</span><br><span class="line">mysql --version</span><br><span class="line">或</span><br><span class="line">mysql --V</span><br></pre></td></tr></table></figure>





<h3 id="MySQL的语法规范"><a href="#MySQL的语法规范" class="headerlink" title="MySQL的语法规范"></a>MySQL的语法规范</h3><p>​    1.不区分大小写,但建议关键字大写，表名、列名小写。<br>​    2.每条命令最好用分号结尾。<br>​    3.每条命令根据需要，可以进行缩进或换行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">单行注释：#注释文字    -- 注释文字 (注意中间要带有一个空格才能生效)</span><br><span class="line">多行注释：/* 注释文字 */</span><br></pre></td></tr></table></figure>



<h2 id="SQL的语言分类"><a href="#SQL的语言分类" class="headerlink" title="SQL的语言分类"></a>SQL的语言分类</h2><p><strong>1.DQL（Data Query Language)：数据查询语言</strong><br>        select<br><strong>2.DML  (Data Manipulate Language):   数据操作语言</strong><br>        insert 、update、delete<br><strong>3.DDL（Data Define Languge)：数据定义语言</strong><br>        create、drop、alter<br><strong>4.TCL （Transaction Control Language)：事务控制语言</strong><br>        commit、rollback、savepoint</p>
<p><strong>5.DCL（Data Control Language)：数据控制语言</strong></p>
<p>   　 grant、revoke</p>
<hr>
<h3 id="DQL语言的学习"><a href="#DQL语言的学习" class="headerlink" title="DQL语言的学习"></a>DQL语言的学习</h3><h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#语法：</span><br><span class="line">查询表的所有数据:  SELECT * FROM 表名;  </span><br><span class="line">查询表中指定字段的值: SELECT 字段1,字段2...字段n FROM 表名;</span><br></pre></td></tr></table></figure>

<p>特点：<br>①通过select查询完的结果 ,是一个虚拟的表格，不是真实存在。<br>②要查询的东西可以是常量值、可以是表达式、可以是字段、可以是函数。</p>
<p>4</p>
<h5 id="使用别名"><a href="#使用别名" class="headerlink" title="使用别名"></a>使用别名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#给查询结果中的字段使用别名</span><br><span class="line">字段名 as 别名</span><br><span class="line">或者</span><br><span class="line">字段名 &quot;别名&quot;</span><br><span class="line">SELECT name as &quot;花名&quot; FROM  flower;</span><br></pre></td></tr></table></figure>

<p>注意: as可以省略不写，别名中没有特殊字符，双引号也可以省略不写。</p>
<h5 id="去除重复"><a href="#去除重复" class="headerlink" title="去除重复"></a>去除重复</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT 字段1,字段2...字段n  FROM 表名;</span><br></pre></td></tr></table></figure>

<p>注意：去除重复的规则是按照行进行去除的,多行数据完全相同取其一,DISTINCT必须放在要查询字段的开头。</p>
<h5 id="号"><a href="#号" class="headerlink" title="+号"></a>+号</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#仅仅只有一个功能:运算符</span><br><span class="line"></span><br><span class="line">#两个操作数为数值型，则做加法运算</span><br><span class="line">SELECT 100+90;  -- 190</span><br><span class="line"></span><br><span class="line">#只要其中一方为字符型，试图将字符型数值转换成数值型 </span><br><span class="line">#1.如果转换成功,则继续做加法运算</span><br><span class="line">#2.如果转换失败,则将字符型数值转换为0</span><br><span class="line">SELECT &quot;100&quot;+90; -- 190</span><br><span class="line">SELECT &quot;Tom&quot;+90; -- 90</span><br><span class="line"></span><br><span class="line">#只要其中一方为null,则结果肯定为null</span><br><span class="line">SELECT null+90; -- null</span><br></pre></td></tr></table></figure>



<h5 id="concat实现拼接操作"><a href="#concat实现拼接操作" class="headerlink" title="concat实现拼接操作"></a>concat实现拼接操作</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#使用方法 </span><br><span class="line">CONCAT(str1,str2...)  </span><br><span class="line"></span><br><span class="line">SELECT CONCAT(1,3,4);  测试  -- 一个数字参数被转化为与之相等的二进制字符串格式</span><br><span class="line">SELECT CONCAT(id,&apos;,&apos;,name) &quot;编号,花名&quot; from flower;</span><br></pre></td></tr></table></figure>

<p>注意:返回结果为连接参数产生的字符串。如有任何一个参数为NULL ，则返回值为 NULL。</p>
<hr>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p>条件查询：根据条件过滤原始表的数据，查询到想要的数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">select 要查询的字段|表达式|常量值|函数 from 表名 where 筛选条件;</span><br></pre></td></tr></table></figure>

<h5 id="一、条件表达式"><a href="#一、条件表达式" class="headerlink" title="一、条件表达式"></a>一、条件表达式</h5><p>条件运算符：&gt;   &lt;   &gt;=   &lt;=   =   &lt;&gt;   !=</p>
<h5 id="二、逻辑表达式"><a href="#二、逻辑表达式" class="headerlink" title="二、逻辑表达式"></a>二、逻辑表达式</h5><p>逻辑运算符：<br>    and（&amp;&amp;）:两个条件如果同时成立，结果为true，否则为false。<br>    or (||)：两个条件只要有一个成立，结果为true，否则为false。<br>    not  (!)：如果条件成立，则not后为false，否则为true。</p>
<p>​    </p>
<h5 id="三、模糊查询"><a href="#三、模糊查询" class="headerlink" title="三、模糊查询"></a>三、模糊查询</h5><p>   %： 代替0个或多个任意字符。<br>    _ ：代替1个任意字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * From flower where name like &apos;_a%&apos;;</span><br><span class="line">#转义关键词  ESCAPE</span><br><span class="line">SELECT * From flower where name like &apos;_\_%&apos;;</span><br><span class="line">SELECT * From flower where name like &apos;_$_%&apos; ESCAPE &apos;$&apos;;</span><br></pre></td></tr></table></figure>



<h5 id="四、关键字-between-and"><a href="#四、关键字-between-and" class="headerlink" title="四、关键字  between  and"></a>四、关键字  between  and</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#包含两头的数据 [ , ]</span><br><span class="line">SELECT * From emp where sal &gt;=200 and sal&lt;=300;</span><br><span class="line">#等价与</span><br><span class="line">SELECT * From emp where sal between 200 and 300;</span><br></pre></td></tr></table></figure>



<h5 id="五、关键字-in"><a href="#五、关键字-in" class="headerlink" title="五、关键字 in"></a>五、关键字 in</h5><p>含义:判断某字段的值是否属于in列表中的某一项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#格式</span><br><span class="line">in (目标值1，目标值2，...) -- in 中的内容只能为一个字段的值,目标值之间必须使用逗号分隔,并且括在括号中。</span><br><span class="line">SELECT * From emp where job in (&apos;Salesman&apos;,&apos;manager&apos;,&apos;analyst&apos;);</span><br></pre></td></tr></table></figure>



<h5 id="六、关键字-is-null-is-not-null"><a href="#六、关键字-is-null-is-not-null" class="headerlink" title="六、关键字  is null  , is not null"></a>六、关键字  is null  , is not null</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#格式 </span><br><span class="line">SELECT * FROM 表名 WHERE 字段名 is null; -- 字段值为Null</span><br><span class="line">SELECT * FROM 表名 WHERE 字段名 is not null; -- 字段值不为Null</span><br><span class="line">SELECT * FROM emp WHERE comm is not null; -- 字段值不为Null</span><br></pre></td></tr></table></figure>

<p>注意: 不能使用=,&lt;&gt;来判断NULL值。</p>
<h5 id="七、安全等于-lt-gt"><a href="#七、安全等于-lt-gt" class="headerlink" title="七、安全等于 &lt;=&gt;"></a>七、安全等于 &lt;=&gt;</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM flower WHERE production &lt;=&gt; null;</span><br></pre></td></tr></table></figure>

<p>is null : 仅仅可以判断NULL值，可读性高,建议使用。</p>
<p>&lt;=&gt; :  既可以判断NULL值,又可以判断普通数值，可读性较低。</p>
<hr>
<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#语法</span><br><span class="line">#单字段排序</span><br><span class="line">select 要查询的东西 from 表名 where 筛选条件 order by 排序的字段|表达式|函数|别名 [asc|desc]</span><br><span class="line"></span><br><span class="line">#多字段排序</span><br><span class="line">select 要查询的东西 from 表名 where 筛选条件 order by 字段名1 [asc|desc],字段名2 [asc|desc]...</span><br></pre></td></tr></table></figure>

<p>注意: </p>
<p>1.asc代表的是升序,desc代表的是降序,如果不写,默认为升序。</p>
<p>2.order by 子句中可以支持单个字段,多个字段,表达式,函数,别名。</p>
<p>3.order by 子句一般是放在查询语句的最后面,limit子句除外。</p>
<hr>
<h4 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h4><h5 id="一、单行函数"><a href="#一、单行函数" class="headerlink" title="一、单行函数"></a>一、单行函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#用法</span><br><span class="line">SELECT 函数名() FROM 表名 WHERE 筛选条件</span><br><span class="line">1、字符函数</span><br><span class="line">	concat　拼接</span><br><span class="line">	substr　截取子串  -- 注意：索引从1开始</span><br><span class="line">	upper　转换成大写</span><br><span class="line">	lower　转换成小写</span><br><span class="line">	trim　去前后指定的空格和字符</span><br><span class="line">	ltrim　去左边空格</span><br><span class="line">	rtrim　去右边空格</span><br><span class="line">	replace　替换</span><br><span class="line">	lpad　用指定的字符实现左填充指定长度</span><br><span class="line">	rpad　用指定的字符实现右填充指定长度</span><br><span class="line">	instr　返回子串第一次出现的索引 -- 如果找不到返回0</span><br><span class="line">	length 获取字节个数</span><br><span class="line"></span><br><span class="line">2、数学函数</span><br><span class="line">	round 四舍五入</span><br><span class="line">	rand 随机数</span><br><span class="line">	floor 向下取整 -- &lt;=该参数的最大整数</span><br><span class="line">	ceil 向上取整  -- &gt;=该参数的最小整数</span><br><span class="line">	mod 取余</span><br><span class="line">	truncate 截断</span><br><span class="line">	</span><br><span class="line">3、日期函数</span><br><span class="line">	now 当前系统日期+时间</span><br><span class="line">	curdate 当前系统日期</span><br><span class="line">	curtime 当前系统时间</span><br><span class="line">	str_to_date 将字符转换成日期</span><br><span class="line">	date_format  将日期转换成字符</span><br><span class="line">	DATEDIFF 求两个日期相差的天数 </span><br><span class="line">	SELECT DATEDIFF(now(),&quot;1998-05-27&quot;) </span><br><span class="line">	</span><br><span class="line">4、流程控制函数</span><br><span class="line">	#if 处理双分支 -- if else的效果</span><br><span class="line">SELECT last_name,commission_pct,IF(commission_pct is null,&apos;没奖金,呵呵&apos;,&apos;有奖金,嘻嘻&apos;) 备注 FROM employees;</span><br><span class="line"></span><br><span class="line">	#case语句 </span><br><span class="line">	#1.类似 switch-case的效果</span><br><span class="line">	case 要判断的字段或表达式</span><br><span class="line">    when 常量1 then 要显示的值1或者语句1;</span><br><span class="line">    when 常量2 then 要显示的值2或者语句2;</span><br><span class="line">    ...</span><br><span class="line">    else 要显示的值n或者语句n;</span><br><span class="line">    end</span><br><span class="line">    #例子</span><br><span class="line">	SELECT salary 原始工资,department_id,</span><br><span class="line">    CASE department_id</span><br><span class="line">      WHEN 30 THEN salary*1.1</span><br><span class="line">      WHEN 40 THEN salary*1.2</span><br><span class="line">      WHEN 50 THEN salary*1.3</span><br><span class="line">      ELSE salary</span><br><span class="line">    END AS 新工资  FROM employees</span><br><span class="line">    </span><br><span class="line">    #2.类似 多重if</span><br><span class="line">    case </span><br><span class="line">    when 条件1 then 要显示的值1或者语句1;</span><br><span class="line">    when 条件2 then 要显示的值2或者语句2;</span><br><span class="line">    ...</span><br><span class="line">    else 要显示的值n或者语句n;</span><br><span class="line">    end</span><br><span class="line">    #例子</span><br><span class="line">    SELECT salary ,</span><br><span class="line">    CASE </span><br><span class="line">     WHEN salary&gt;20000 THEN &apos;A&apos;</span><br><span class="line">     WHEN salary&gt;15000 THEN &apos;B&apos;</span><br><span class="line">     WHEN salary&gt;10000 THEN &apos;C&apos;</span><br><span class="line">     ELSE &apos;D&apos;</span><br><span class="line">    END AS 工资级别 FROM employees</span><br><span class="line">    </span><br><span class="line">5、其他函数</span><br><span class="line">	version 版本</span><br><span class="line">	database 当前库</span><br><span class="line">	user 当前连接用户</span><br><span class="line">	md5(&apos;字符&apos;) 返回该字符的md5加密形式 </span><br><span class="line">	datediff(大的日期，小的日期) 返回两个日期的时间差</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h5 id="二、分组函数"><a href="#二、分组函数" class="headerlink" title="二、分组函数"></a>二、分组函数</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sum 求和</span><br><span class="line">max 最大值</span><br><span class="line">min 最小值</span><br><span class="line">avg 平均值</span><br><span class="line">count 计算个数</span><br></pre></td></tr></table></figure>

<p>特点：<br><em>1、*sum,max,min,avg,count(字段名)都忽略null值，count(</em> )不忽略null值。<br>2、sum和 avg一般用于处理数值型；max、min、count可以处理任何数据类型。<br>3、都可以搭配distinct使用，用于统计去重后的结果。<br>4、count的参数可以支持：字段、常量值、* ，一般放1,建议使用 count(*)。</p>
<p>效率：</p>
<p>MyISAM存储引擎下,count(*)的效率高。</p>
<p>InnoDB存储引擎下,count(*)和count(1)的效率差不多，比count(字段名)要高一些。</p>
<hr>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#语法：</span><br><span class="line">#分组前的筛选</span><br><span class="line">select 查询的字段，分组函数</span><br><span class="line">from 表名</span><br><span class="line">[where 筛选条件]</span><br><span class="line">group by 分组的字段</span><br><span class="line">[order by 子句]</span><br><span class="line"></span><br><span class="line">#分组后的筛选 having 子句</span><br><span class="line">-- 查询每个工种有奖金的员工的最高工资&gt;12000的工种编号和最高工资</span><br><span class="line">select MAX(salary),job_id from employees where commission_pct is not null</span><br><span class="line">group by job_id having MAX(salart)&gt;12000;</span><br><span class="line"></span><br><span class="line">-- 按员工姓名的长度分组,查询每一组的员工个数，筛选员工个数&gt;5</span><br><span class="line">select count(*) c,LENGTH(last_name) len_name from employees </span><br><span class="line">group by len_name having c&gt;5;</span><br><span class="line">#group by,having后可以支持别名。</span><br></pre></td></tr></table></figure>

<p>特点：<br>1、支持按单个字段分组;也可以按多个字段分组,多个字段之间用逗号隔开,没有顺序要求;表达式或函数(用得较少)。<br>2、和分组函数一同查询的字段最好是分组后的字段。<br>3、分组筛选<br>针对的表             位置            关键字<br>分组前筛选：    原始表        group by的前面        where<br>分组后筛选：    分组后的结果集    group by的后面        having</p>
<p>分组函数做条件肯定是放在having子句中。</p>
<p>4.查询列表必须特殊,要求是分组函数和group by后出现的字段。</p>
<hr>
<h4 id="多表连接查询"><a href="#多表连接查询" class="headerlink" title="多表连接查询"></a>多表连接查询</h4><h5 id="一、分类"><a href="#一、分类" class="headerlink" title="一、分类"></a><strong>一、分类</strong></h5><p>按年代分类：</p>
<p>sql92标准，sql99标准</p>
<p>按功能分类:</p>
<p>内连接：等值连接,非等值连接,自连接</p>
<p>外连接：左外连接,右外连接,全外连接</p>
<p>交叉连接</p>
<h5 id="二、笛卡尔乘积"><a href="#二、笛卡尔乘积" class="headerlink" title="二、笛卡尔乘积"></a><strong>二、笛卡尔乘积</strong></h5><p>表1有m行，表2有n行,结果为m*n行。<br>解决办法：添加上有效的连接条件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from emp,dept;</span><br></pre></td></tr></table></figure>



<h5 id="三、sql92标准"><a href="#三、sql92标准" class="headerlink" title="三、sql92标准"></a><strong>三、sql92标准</strong></h5><p>含义：1992年推出的sql语法。</p>
<p>仅仅支持内连接。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#1.等值连接 先做笛卡尔积，然后筛选,筛选条件为等值筛选。</span><br><span class="line">select e.ename,e.job,d.dname from emp e,dept d where e.deptno = d.deptno;</span><br><span class="line">/*</span><br><span class="line">1.多表等值连接的结果为多表的交集部分。</span><br><span class="line">2.n表连接，至少需要n-1个连接条件。</span><br><span class="line">3.多表的顺序没有要求，一般需要为表起别名。</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#2.非等值连接</span><br><span class="line">select * from emp e,sqlgrade s where e.sal&gt;=s.losal and e.sal&lt;=s.hisal;</span><br><span class="line"></span><br><span class="line">#3.自连接</span><br><span class="line">-- 查询员工姓名,工作,薪资,及上级领导的姓名</span><br><span class="line">select e1.ename,e1.job,e1.sal,e2.ename from emp e1,emp e2 where e1.mgr=e2.empno;</span><br></pre></td></tr></table></figure>



<h5 id="四、sql99标准-推荐使用"><a href="#四、sql99标准-推荐使用" class="headerlink" title="四、sql99标准[推荐使用]"></a>四、sql99标准[推荐使用]</h5><p>含义：1999年推出的sql语法。<br>支持：内连接,外连接(左外连接，右外连接),交叉连接</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#语法：</span><br><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">【inner|left [outer]|right [outer]|cross】join 表2 别名</span><br><span class="line">on 连接条件</span><br><span class="line">【where 筛选条件】</span><br><span class="line">【group by 分组字段】</span><br><span class="line">【having 分组后的筛选条件】</span><br><span class="line">【order by 排序的字段或表达式】</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">-- 内连接</span><br><span class="line">#1.等值连接</span><br><span class="line">select 查询列表</span><br><span class="line">from 表1 别名</span><br><span class="line">[inner] join 表2 别名</span><br><span class="line">on 连接条件</span><br><span class="line">[where 筛选条件]</span><br><span class="line"></span><br><span class="line">select e.ename,e.job,d.dname </span><br><span class="line">from emp e</span><br><span class="line">inner join dept d </span><br><span class="line">on e.deptno = d.deptno</span><br><span class="line">where e.deptno=1001;</span><br><span class="line">/*</span><br><span class="line">1.inner可以省略。</span><br><span class="line">2.连接条件放在on后面,筛选条件放在where后面,提高分离性,便于阅读。</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#2.非等值连接</span><br><span class="line">select * </span><br><span class="line">from emp e</span><br><span class="line">inner join sqlgrade s </span><br><span class="line">on e.sal&gt;=s.losal and e.sal&lt;=s.hisal;</span><br><span class="line"></span><br><span class="line">#3.自连接</span><br><span class="line">select e1.ename,e1.job,e1.sal,e2.ename </span><br><span class="line">from emp e1</span><br><span class="line">inner join emp e2 </span><br><span class="line">on e1.mgr=e2.empno;</span><br><span class="line"></span><br><span class="line">-- 外连接</span><br><span class="line">#应用场景:用于查询一个表中有，另一个表没有的记录。</span><br><span class="line">/*</span><br><span class="line">特点：</span><br><span class="line">1.外连接的查询结果为主表中的所有记录</span><br><span class="line">  如果从表中有和它匹配的,则显示匹配的值。</span><br><span class="line">  如果从表中没有和它匹配的,则显示null。</span><br><span class="line">  外连接查询的结果=内连接+主表中有而从表没有的记录。</span><br><span class="line">2.左外连接：left join左边的是主表</span><br><span class="line">  右外连接：left join右边的是主表</span><br><span class="line">3.左外和右外交换两个表的顺序,可以实现同样的效果。</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#1.左外连接与右外连接</span><br><span class="line">-- 左外连接</span><br><span class="line">select e.*,d.* </span><br><span class="line">from emp e</span><br><span class="line">left outer join dept d</span><br><span class="line">on e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">-- 右外连接</span><br><span class="line">select e.*,d.* </span><br><span class="line">from emp e</span><br><span class="line">right outer join dept d</span><br><span class="line">on e.deptno = d.deptno;</span><br><span class="line"></span><br><span class="line">#2.交叉连接 本质就是笛卡尔积</span><br><span class="line">select e.*,d.* from emp e</span><br><span class="line">cross join dept d</span><br><span class="line">on e.deptno=d.deptno;</span><br></pre></td></tr></table></figure>



<p><strong>五、sql92 与 sql99的比较</strong></p>
<p>功能：sql99支持的较多。</p>
<p>可读性：sql99实现连接条件和筛选条件的分离,可读性较高。</p>
<p>推荐性: 建议使用sql99。</p>
<hr>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><p>含义：</p>
<p>​    一条查询语句中又嵌套了另一条完整的select语句，其中被嵌套的select语句，称为子查询或内查询;在外面的查询语句，称为主查询或外查询。</p>
<p>分类：</p>
<p>按子查询出现的位置：     </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT 后面：</span><br><span class="line">	仅仅支持标量子查询</span><br><span class="line">from 后面:</span><br><span class="line">	支持表子查询</span><br><span class="line">where或having后面:</span><br><span class="line">	标量子查询 (单行子查询)</span><br><span class="line">	列子查询   (多行子查询)</span><br><span class="line">	行子查询   (多列多行)</span><br><span class="line">exists 后面 (相关子查询)</span><br><span class="line">       表子查询</span><br></pre></td></tr></table></figure>

<p>按结构集的行列数不同:<br>           标量子查询（结果集只有一行一列）</p>
<p>​           列子查询    （结果集只有一列多行）</p>
<p>​           行子查询    （结果集有一行多列）    </p>
<p>​           表子查询      (结果集一般为多行多列）    </p>
<p>特点：</p>
<p>1、子查询都放在小括号内<br>2、子查询可以放在from后面、select后面、where后面、having后面，但一般放在条件的右侧<br>3、子查询优先于主查询执行，主查询使用了子查询的执行结果<br>4、子查询根据查询结果的行数不同分为以下两类：<br>① 单行子查询<br>    结果集只有一行<br>    一般搭配单行操作符使用：&gt; &lt; = &lt;&gt; &gt;= &lt;=<br>    非法使用子查询的情况：<br>    a、子查询的结果为一组值<br>    b、子查询的结果为空</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 标量子查询</span><br><span class="line">-- 查询工资比Tom高的员工信息</span><br><span class="line">select *</span><br><span class="line">form emp</span><br><span class="line">where sal&gt;(</span><br><span class="line">			select sal</span><br><span class="line">    		from emp </span><br><span class="line">    		where ename = &apos;Tom&apos;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 查询最低工资大于50号的最低工资的部门编号和其最低工资。</span><br><span class="line">select min(sal),deptno</span><br><span class="line">from emp </span><br><span class="line">group by deptno</span><br><span class="line">having min(sal)&gt;(</span><br><span class="line">    			select min(sal) </span><br><span class="line"> 				from emp </span><br><span class="line">				where deptno=50</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>② 多行子查询<br>    结果只有一个字段但是字段有n个值。</p>
<p>​    一般搭配多行操作符使用：any、all、in、not in。</p>
<p>​    any:    任意</p>
<p>​    all:    所有</p>
<p>​    in：表示任意存在，相当于=any。</p>
<p>​    not in :相当于&lt;&gt; all。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#关键字 any</span><br><span class="line">-- 查询工资高于任意一个CLERK的所有员工信息。</span><br><span class="line">select * </span><br><span class="line">from emp</span><br><span class="line">where sal &gt; any(</span><br><span class="line">				select sal</span><br><span class="line">    			from emp </span><br><span class="line">    			where job=&apos;CLERK&apos;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#关键词 all</span><br><span class="line">-- 查询工资高于所有SALESMAN的员工信息。</span><br><span class="line">select * </span><br><span class="line">from emp </span><br><span class="line">where sal &gt; all(</span><br><span class="line">				select sal</span><br><span class="line">    			from emp </span><br><span class="line">    			where job=&apos;SALESMAN&apos;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#关键词 in</span><br><span class="line">-- 查询部门号20中同部门10的雇员工作一样的雇员信息。</span><br><span class="line">select * </span><br><span class="line">from emp</span><br><span class="line">where job in (</span><br><span class="line">			 select job</span><br><span class="line">    		 from emp </span><br><span class="line">    		 where deptno=10</span><br><span class="line">) and deptno =20;</span><br><span class="line">-- 等价于</span><br><span class="line">select * </span><br><span class="line">from emp</span><br><span class="line">where job = any(</span><br><span class="line">			 select job</span><br><span class="line">    		 from emp </span><br><span class="line">    		 where deptno=10</span><br><span class="line">) and deptno =20;</span><br></pre></td></tr></table></figure>

<p>行子查询 (使用频率少)</p>
<p>​    结果集一行多列或者多行多列</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#查询员工编号最小并且工资最高的员工信息。</span><br><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">where empno = (</span><br><span class="line">				select min(empno)</span><br><span class="line">    			from emp</span><br><span class="line">)  and sal = (</span><br><span class="line">    			select max(sal)</span><br><span class="line">    			from emp</span><br><span class="line">);</span><br><span class="line">-- 等价于</span><br><span class="line">select *</span><br><span class="line">from emp</span><br><span class="line">where (empno,sal) = (</span><br><span class="line">					select min(empno),max(sal)</span><br><span class="line">    				from emp</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>from后面的子查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#查询每个部门的平均工资的工资等级</span><br><span class="line">-- 将子查询结果充当一张表,要求必须起别名</span><br><span class="line">select avg_dep.*,s.grade</span><br><span class="line">from (</span><br><span class="line">	 select avg(sal) avg,deptno</span><br><span class="line">     from emp </span><br><span class="line">     group by deptno</span><br><span class="line">) avg_dep</span><br><span class="line">inner join salgrade s</span><br><span class="line">on avg_dep.avg between losal and hisal;</span><br></pre></td></tr></table></figure>

<p>exists后面的子查询 （相关子查询）</p>
<p>EXISTS用于检查子查询是否至少会返回一行数据，该子查询实际上并不返回任何数据，而是返回值true或false,结果为1或0。</p>
<p>语法: exists (完整的查询语句)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#查询有员工的部门名</span><br><span class="line">select d.dname </span><br><span class="line">from dept d</span><br><span class="line">where exists (</span><br><span class="line">			select *</span><br><span class="line">    		from emp e</span><br><span class="line">     		where d.deptno =e.deptno   		</span><br><span class="line">);</span><br><span class="line">-- 等价于</span><br><span class="line">select d.dname </span><br><span class="line">from dept d</span><br><span class="line">where d.deptno in (</span><br><span class="line">			select deptno</span><br><span class="line">    		from emp     				</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p>应用场景：</p>
<p>实际的web项目中需要根据用户的需求提交对应的分页查询的sql语句。</p>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select 字段|表达式,...</span><br><span class="line">from 表</span><br><span class="line">【where 条件】</span><br><span class="line">【group by 分组字段】</span><br><span class="line">【having 条件】</span><br><span class="line">【order by 排序的字段】</span><br><span class="line">limit 【起始的条目索引，】条目数;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<p>1.起始条目索引从0开始。</p>
<p>2.limit子句放在查询语句的最后</p>
<p>3.公式：select * from  表 limit （page-1）*size,size<br>每页显示条目数size<br>要显示的页数 page</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#查询前五条员工的信息</span><br><span class="line">select * from emp limit 0,5;</span><br><span class="line">select * from emp limit 5;</span><br><span class="line"></span><br><span class="line">#查询第11条-第25条</span><br><span class="line">select * from emp 10,15;</span><br><span class="line"></span><br><span class="line">#有奖金的员工信息,并且工资较高的前10名显示出来</span><br><span class="line">select * </span><br><span class="line">from emp</span><br><span class="line">where comm is not null</span><br><span class="line">order by sal desc</span><br><span class="line">limit 0,10;</span><br></pre></td></tr></table></figure>



<h4 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h4><p>引入：<br>    union 联合、合并：将多条查询语句的结果合并成一个结果。</p>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union  【all】</span><br><span class="line">.....</span><br><span class="line">select 字段|常量|表达式|函数 【from 表】 【where 条件】</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<p>1、多条查询语句的查询的列数必须是一致的。<br>2、多条查询语句的查询的列的类型几乎相同。<br>3、union代表去重，union all代表不去重。</p>
<p>应用场景：</p>
<p>要查询的结果来自于多个表，且多个表没有直接的连接关系,但查询的信息一致时。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查询中国用户中男性的信息以及外国用户中年男性的用户信息</span><br><span class="line">select id,cname,csex from t_ca where csex =&apos;男&apos;</span><br><span class="line">union</span><br><span class="line">select t_id,tname from t_ua where tGender=&apos;male&apos;;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="DML语言的学习"><a href="#DML语言的学习" class="headerlink" title="DML语言的学习"></a>DML语言的学习</h3><h4 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#语法：</span><br><span class="line">-- 方式一 支持插入多行，支持子查询</span><br><span class="line">	insert into 表名(字段名，...) values(值1，...);</span><br><span class="line">-- 方式二 </span><br><span class="line">	insert into 表名 set 列名1=值1,列名2=值2...;</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<p>1、字段类型和值类型一致或兼容，而且一一对应。<br>2、可以为空的字段，可以不用插入值，或用null填充。<br>3、不可以为空的字段，必须插入值。<br>4、字段个数和值的个数必须一致。<br>5、字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#方式一支持插入多行</span><br><span class="line">insert into beauty</span><br><span class="line">values(1603,&apos;尹远洋&apos;,&apos;男&apos;,23),(1604,&apos;张三&apos;,&apos;男&apos;,21),(1605,&apos;李丽&apos;,&apos;女&apos;,18);</span><br><span class="line"></span><br><span class="line">#支持子查询</span><br><span class="line">insert into beauty(id,name,age) select 1603,&apos;尹远洋&apos;,23;</span><br></pre></td></tr></table></figure>



<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>修改单表语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update 表名 set 字段=新值,字段=新值 where 筛选条件;</span><br></pre></td></tr></table></figure>

<p>修改多表语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#sql92语法</span><br><span class="line">update 表1 别名1,表2 别名2</span><br><span class="line">set 字段=新值，字段=新值</span><br><span class="line">where 连接条件</span><br><span class="line">and 筛选条件;</span><br><span class="line"></span><br><span class="line">#sql99语法</span><br><span class="line">update 表1 别名1</span><br><span class="line">inner|left|right join 表2 别名2</span><br><span class="line">on 连接条件</span><br><span class="line">set 字段=新值，字段=新值</span><br><span class="line">where 筛选条件;</span><br></pre></td></tr></table></figure>



<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><h5 id="方式1：delete语句"><a href="#方式1：delete语句" class="headerlink" title="方式1：delete语句"></a>方式1：delete语句</h5><p>单表的删除： ★</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名 [where 筛选条件];</span><br></pre></td></tr></table></figure>

<p>多表的删除：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#sql92语法</span><br><span class="line">	delete 别名1，别名2</span><br><span class="line">	from 表1 别名1，表2 别名2</span><br><span class="line">	where 连接条件</span><br><span class="line">	and 筛选条件;</span><br><span class="line">	</span><br><span class="line">#sql99语法</span><br><span class="line">	delete 别名1，别名2</span><br><span class="line">	from 表1 别名1</span><br><span class="line">	inner|left|right join 表2 别名2</span><br><span class="line">	on 连接条件</span><br><span class="line">	where 筛选条件;</span><br></pre></td></tr></table></figure>

<h5 id="方式2：truncate语句"><a href="#方式2：truncate语句" class="headerlink" title="方式2：truncate语句"></a>方式2：truncate语句</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table 表名;</span><br></pre></td></tr></table></figure>

<p>两种方式的区别【面试题】</p>
<p>1.truncate不能加where条件，而delete可以加where条件。</p>
<p>2.truncate的效率高一丢丢。</p>
<p>3.truncate 删除带自增长的列的表后，如果再插入数据，数据从1开始；<br>delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始。</p>
<p>4.truncate删除没有返回值，delete删除有返回值。</p>
<p>4.truncate删除不能回滚，delete删除可以回滚。</p>
<hr>
<h3 id="DDL语言的学习"><a href="#DDL语言的学习" class="headerlink" title="DDL语言的学习"></a>DDL语言的学习</h3><h4 id="库和表的管理"><a href="#库和表的管理" class="headerlink" title="库和表的管理"></a>库和表的管理</h4><h5 id="库的管理"><a href="#库的管理" class="headerlink" title="库的管理"></a>库的管理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#创建库</span><br><span class="line">create database [if not exists] 库名;</span><br><span class="line">#修改库 </span><br><span class="line">-- 目前不能用了,不安全</span><br><span class="line">#更改库的字符集</span><br><span class="line">alter database 库名 character set 字符集;</span><br><span class="line">#删除库</span><br><span class="line">drop database [if exists] 库名;</span><br></pre></td></tr></table></figure>



<h5 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#创建表</span><br><span class="line">CREATE TABLE [IF NOT EXISTS] 表名(</span><br><span class="line">	列名 列的类型[(长度) 约束],</span><br><span class="line">    列名 列的类型[(长度) 约束],</span><br><span class="line">    ...</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS stuinfo(</span><br><span class="line">	stuId INT,</span><br><span class="line">	stuName VARCHAR(20),</span><br><span class="line">	gender CHAR,</span><br><span class="line">	bornDate DATETIME</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#修改表 alter</span><br><span class="line">语法：ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段名 【字段类型】;</span><br><span class="line"></span><br><span class="line">#①修改字段名</span><br><span class="line">ALTER TABLE studentinfo CHANGE COLUMN sex gender CHAR;</span><br><span class="line"></span><br><span class="line">#②修改表名</span><br><span class="line">ALTER TABLE stuinfo RENAME [TO] studentinfo;</span><br><span class="line"></span><br><span class="line">#③修改字段类型和列级约束</span><br><span class="line">ALTER TABLE studentinfo MODIFY COLUMN borndate DATE ;</span><br><span class="line"></span><br><span class="line">#④添加字段</span><br><span class="line">ALTER TABLE studentinfo ADD COLUMN email VARCHAR(20);</span><br><span class="line"></span><br><span class="line">#⑤删除字段</span><br><span class="line">ALTER TABLE studentinfo DROP COLUMN email;</span><br><span class="line"></span><br><span class="line">#删除表</span><br><span class="line">DROP TABLE [IF EXISTS] studentinfo;</span><br><span class="line"></span><br><span class="line">#表的复制</span><br><span class="line">-- 1.仅仅复制表的结构</span><br><span class="line">create table 表名 like 表名;</span><br><span class="line"></span><br><span class="line">-- 2.复制表的结构+数据</span><br><span class="line">create table 新表 select * from 旧表;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<h4 id="常见的数据类型"><a href="#常见的数据类型" class="headerlink" title="常见的数据类型"></a>常见的数据类型</h4><p>整型：<br>    tinyint、smallint、mediumint、int/Integer、bigint<br>小数：<br>    浮点型: float、double<br>    定点型:dec(M,D)、decimal(M,D)</p>
<p>​    特点：</p>
<p>​    1.M：整数部位+小数部位</p>
<p>​    D:小数部位</p>
<p>​    如果超过范围，则插入临界值。</p>
<p>​    2.M和D都可以省略，如果是decimal，则M默认为10,D默认为0。</p>
<p>​    如果是float和double,则会根据插入的数值的精度来决定精度。</p>
<p>​    3.定点型的精确度较高,如果要求插入数值的精度较高如货币运算等则考虑使用。</p>
<p>字符型：</p>
<p>较短的文本:char 、varchar</p>
<p>较长的文本:text、blob(较大的二进制)</p>
<table>
<thead>
<tr>
<th></th>
<th>写法</th>
<th>M的意思</th>
<th>特点</th>
<th>空间的耗费</th>
<th>效率</th>
</tr>
</thead>
<tbody><tr>
<td>char</td>
<td>char(M)</td>
<td>最大的字符数,可以省略,默认为1</td>
<td>固定长度的字符</td>
<td>比较耗费</td>
<td>高</td>
</tr>
<tr>
<td>varchar</td>
<td>varchar(M)</td>
<td>最大的字符数,不可以省略</td>
<td>可变长度的字符</td>
<td>比较节省</td>
<td>低</td>
</tr>
</tbody></table>
<p>其他：</p>
<p>binary和varbinary用于保存较短的二进制。</p>
<p>enum用于保存枚举。</p>
<p>set用于保存集合。</p>
<p>日期型：</p>
<p>分类：</p>
<p>​    data:只保存日期</p>
<p>​    time:只保存时间</p>
<p>​    year:只保存年</p>
<p>​    datetime:保存日期+时间</p>
<p>​    timestamp:保存日期+时间</p>
<p>特点：</p>
<table>
<thead>
<tr>
<th></th>
<th>字节</th>
<th>范围</th>
<th>时区等的影响</th>
</tr>
</thead>
<tbody><tr>
<td>datetime</td>
<td>8</td>
<td>1000-9999</td>
<td>不受</td>
</tr>
<tr>
<td>timestamp</td>
<td>4</td>
<td>1970-2038</td>
<td>受</td>
</tr>
</tbody></table>
<p>Blob类型：</p>
<p>​        ·tinyblob:仅255个字符<br>　　·blob:最大限制到65K字节<br>　　·mediumblob:限制到16M字节<br>　　·longblob:可达4GB</p>
<h4 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NOT NULL:非空,用来保证该字段的值不能为空</span><br><span class="line">DEFAULT:默认,用于保证该字段有默认值</span><br><span class="line">UNIQUE:唯一,用于保证该字段的值具有唯一性,可以为空</span><br><span class="line">CHECK:检查约束  [mysql中不支持]</span><br><span class="line">PRIMARY KEY:主键,用于保证该字段的值具有唯一性,并且非空</span><br><span class="line">FOREIGN KEY:外键,用于限制两个表的关系,用于保证该字段的值必须来自于主表的关联列的值</span><br><span class="line">在从表添加外键约束,用于引用主表中某列的值</span><br></pre></td></tr></table></figure>

<p>添加约束的时机：</p>
<p>​        1.创建表时</p>
<p>​        2.修改表时</p>
<p>约束的添加分类：</p>
<p>​            列级约束：</p>
<p>​                        六大约束语法上都支持,但是外键约束没有效果</p>
<p>​            表级约束：</p>
<p>​                        除了非空,默认,其他的都支持</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">	字段名 字段类型 列级约束,</span><br><span class="line">	字段名 字段类型,</span><br><span class="line">	表级约束</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<p>列级约束</p>
<p>语法：直接在字段名和类型后面追加约束类型即可。</p>
<p>只支持:默认,非空,主键,唯一。</p>
<p>表级约束</p>
<p>支持：主键,外键,唯一</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[constraint 约束名] 约束类型(字段名);</span><br><span class="line">constraint pk PRIMARY KEY(id), #主键约束</span><br><span class="line">UNIQUE(seat), #唯一键</span><br><span class="line">constraint fk_stuinfo_major FOREIGN KEY(majorid) references major(id)  #外键约束</span><br></pre></td></tr></table></figure>



<p>主键和唯一的区别:</p>
<table>
<thead>
<tr>
<th></th>
<th>保证唯一性</th>
<th>是否允许为空</th>
<th>一个表中可以有多少个</th>
<th>是否允许组合</th>
</tr>
</thead>
<tbody><tr>
<td>主键</td>
<td>√</td>
<td>×</td>
<td>至多有一个</td>
<td>√，但不推荐</td>
</tr>
<tr>
<td>唯一</td>
<td>√</td>
<td>√</td>
<td>可以有多个</td>
<td>√，但不推荐</td>
</tr>
</tbody></table>
<p>外键：</p>
<p>1.要求在从表设置外键关系。</p>
<p>2.从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称没要求。</p>
<p>3.主表的关联列必须是一个key（一般是主键或者唯一)。</p>
<p>4.插入数据时,先插入主表,再插入从表。<br>删除数据时,先删除从表,再删除主表。</p>
<p>修改表时添加约束</p>
<p>1.添加列级约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 modify column 字段名 字段类型 新约束;</span><br></pre></td></tr></table></figure>

<p>2.添加表级约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add [constraint 约束名] 约束类型(字段名) [外键的引用];</span><br></pre></td></tr></table></figure>



<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#添加非空约束</span><br><span class="line">alter table stuinfo modify column stuname varchar(20) not null;</span><br><span class="line">#添加默认约束</span><br><span class="line">alter table stuinfo modify column age int  default 18;</span><br><span class="line">#添加主键</span><br><span class="line">-- 列级约束</span><br><span class="line">alter table stuinfo modify column id  int primary key;</span><br><span class="line">-- 表级约束</span><br><span class="line">alter table stuinfo add primary key(id);</span><br><span class="line">#添加唯一</span><br><span class="line">-- 列级约束</span><br><span class="line">alter table stuinfo modify column seat int unique;</span><br><span class="line">-- 表级约束</span><br><span class="line">alter table stuinfo add unique(seat);</span><br><span class="line">#添加外键</span><br><span class="line">-- 表级约束</span><br><span class="line">alter table stuinfo add constraint fk_stuinfo_major foreign key(majorid) references major(id);</span><br></pre></td></tr></table></figure>



<p>修改表时删除约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#删除非空约束</span><br><span class="line">alter table stuinfo modify column stuname varchar(20)  null;</span><br><span class="line">#删除默认约束</span><br><span class="line">alter table stuinfo modify column age int ;</span><br><span class="line">#删除主键</span><br><span class="line">alter table stuinfo drop primary key;</span><br><span class="line">#删除唯一</span><br><span class="line">alter table stuinfo drop index seat;</span><br><span class="line">#删除外键</span><br><span class="line">alter table stuinfo drop foreign key fk_stuinfo_major;</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th></th>
<th>位置</th>
<th>支持的约束类型</th>
<th>是否可以起约束名</th>
</tr>
</thead>
<tbody><tr>
<td>列级约束</td>
<td>列的后面</td>
<td>语法都支持，但外键没有效果</td>
<td>不可以</td>
</tr>
<tr>
<td>表级约束</td>
<td>所有列的下面</td>
<td>默认和非空不支持,其他支持</td>
<td>可以(主键没有效果)</td>
</tr>
</tbody></table>
<p>标识列</p>
<p>又称为自增长列。含义：可以不用手动的插入值，系统提供默认的序列值。</p>
<p>特点:</p>
<p>1.标识列要求是一个key。</p>
<p>2.一个表至多一个标识列。</p>
<p>3.标识列的类型只能是数值型。</p>
<p>4.标识列可以通过set auto_increment_increment=数字；设置步长</p>
<p>可以通过手动插入值 ,设置起始。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table user(</span><br><span class="line">	id int primary key auto_increment,</span><br><span class="line">    ...</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<p>修改表时设置标识列:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table user modify column id int primary key auto_increment;</span><br></pre></td></tr></table></figure>

<p>删除表时设置标识列:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table user modify column id int;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="数据库事务"><a href="#数据库事务" class="headerlink" title="数据库事务"></a>数据库事务</h3><h4 id="特点-ACID"><a href="#特点-ACID" class="headerlink" title="特点(ACID):"></a>特点(ACID):</h4><p>​    原子性（Atomicity）：一个事务不可再分割,要么都执行要么都不执行。<br>​    一致性(Consistency)：一个事务保证数据的状态操作前和操作后保持一致。<br>​    隔离性(Isolation)：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰。<br>​    持久性(Durability)：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改。</p>
<h4 id="事务的分类"><a href="#事务的分类" class="headerlink" title="事务的分类"></a>事务的分类</h4><p>隐式事务，没有明显的开启和结束事务的标志。</p>
<p>比如insert、update、delete语句本身就是一个事务。</p>
<p>显式事务，具有明显的开启和结束事务的标志。</p>
<p>前提：必须先设置自动提交功能为禁用。</p>
<p>set autocommit=0;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#步骤1:开启事务</span><br><span class="line">set autocommit=0;</span><br><span class="line">start transaction; #可选的</span><br><span class="line">	</span><br><span class="line">#步骤2.编写事务的一组逻辑操作单元（多条sql语句）</span><br><span class="line">	select</span><br><span class="line">	insert</span><br><span class="line">	update</span><br><span class="line">	delete	</span><br><span class="line">	</span><br><span class="line">#步骤3.提交事务或回滚事务</span><br><span class="line">	commit; 提交事务</span><br><span class="line">	rollback; 回滚事务</span><br></pre></td></tr></table></figure>

<h4 id="使用到的关键字"><a href="#使用到的关键字" class="headerlink" title="使用到的关键字"></a>使用到的关键字</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">set autocommit=0;</span><br><span class="line">start transaction;</span><br><span class="line">commit;</span><br><span class="line">rollback;</span><br><span class="line">savepoint  断点</span><br><span class="line">commit to 断点</span><br><span class="line">rollback to 断点</span><br><span class="line"></span><br><span class="line">#演示savepoint的使用</span><br><span class="line">set autocommit=0;</span><br><span class="line">start transaction;</span><br><span class="line">delete from account where id=25;</span><br><span class="line">savepoint a;-- 设置保持点a</span><br><span class="line">delete from account where id=28;</span><br><span class="line">rollback to a; -- 回滚到保持点a</span><br></pre></td></tr></table></figure>





<h4 id="事务的隔离级别"><a href="#事务的隔离级别" class="headerlink" title="事务的隔离级别"></a>事务的隔离级别</h4><h5 id="事务并发问题如何发生"><a href="#事务并发问题如何发生" class="headerlink" title="事务并发问题如何发生"></a>事务并发问题如何发生</h5><p>当多个事务同时操作同一个数据库的相同数据时。</p>
<h5 id="事务的并发问题有哪些"><a href="#事务的并发问题有哪些" class="headerlink" title="事务的并发问题有哪些"></a>事务的并发问题有哪些</h5><h5 id="1、脏读"><a href="#1、脏读" class="headerlink" title="1、脏读"></a>1、脏读</h5><p>脏读是指并发过程中，一个事务处理过程里读取了另一个未提交的事务中的数据。</p>
<p>当一个事务正在多次修改某个数据，而在这个事务中这多次的修改都还未提交，这时一个并发的事务来访问该数据，就会造成两个事务得到的数据不一致。例如：用户A向用户B转账100元，对应SQL命令如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update account set money=money+100 where name=’B’;  (此时A通知B)</span><br><span class="line"></span><br><span class="line">update account set money=money - 100 where name=’A’;</span><br></pre></td></tr></table></figure>

<p>当只执行第一条SQL时，A通知B查看账户，B发现确实钱已到账（此时即发生了脏读），而之后无论第二条SQL是否执行，只要该事务不提交，则所有操作都将回滚，那么当B以后再次查看账户时就会发现钱其实并没有转。</p>
<h5 id="2、不可重复读"><a href="#2、不可重复读" class="headerlink" title="2、不可重复读"></a>2、不可重复读</h5><p>　　不可重复读是指在对于数据库中的某条数据，一个事务范围内多次查询却返回了不同的数据值，这是由于在查询间隔，被另一个事务修改并提交了。</p>
<p>　　例如事务T1在读取某一数据，而事务T2立马修改了这个数据并且提交事务给数据库，事务T1再次读取该数据就得到了不同的结果，发生了不可重复读。</p>
<h5 id="3、幻读"><a href="#3、幻读" class="headerlink" title="3、幻读"></a>3、幻读</h5><p>　　幻读是事务非独立执行时发生的一种现象。例如事务T1查询<strong>整张表</strong>中有多少条记录，这时事务T2又对这个表中插入了一行数据。而操作事务T1的用户如果再查看整张表有多少行数据，会发现多出一行数据，其实这行是事务T2添加的，就好像产生幻觉一样，这就是发生了幻读。</p>
<h5 id="不可重复读和脏读的区别是"><a href="#不可重复读和脏读的区别是" class="headerlink" title="不可重复读和脏读的区别是:"></a>不可重复读和脏读的区别是:</h5><p>脏读是某一事务读取了另一个事务未提交的脏数据。</p>
<p>不可重复读则是两次读取之间存在另一个事务提交的数据。</p>
<p>　　</p>
<p><strong>幻读和不可重复读区别是：</strong></p>
<ul>
<li><p>不可重复读的重点是修改（update），操作的是某一行数据，需要锁行。同样的条件, 你读取过的数据, 再次读取出来发现值不一样了。</p>
</li>
<li><p>幻读的重点在于新增（insert）或者删除（delete），操作的是整张表，需要锁表。同样的条件, 第1次和第2次读出来的记录数不一样。</p>
</li>
</ul>
<h5 id="如何避免事务的并发问题"><a href="#如何避免事务的并发问题" class="headerlink" title="如何避免事务的并发问题"></a>如何避免事务的并发问题</h5><p>通过设置事务的隔离级别:<br>1、READ UNCOMMITTED（读未提交）<br>2、READ COMMITTED（读已提交） 可以避免脏读<br>3、REPEATABLE READ（可重复读） 可以避免脏读、不可重复读和一部分幻读  (默认)<br>4、SERIALIZABLE  (串行化) 可以避免脏读、不可重复读和幻读</p>
<h5 id="设置隔离级别"><a href="#设置隔离级别" class="headerlink" title="设置隔离级别"></a>设置隔离级别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set session|global  transaction isolation level 隔离级别名;</span><br></pre></td></tr></table></figure>

<h5 id="查看隔离级别"><a href="#查看隔离级别" class="headerlink" title="查看隔离级别"></a>查看隔离级别</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br></pre></td></tr></table></figure>



<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>含义：理解成一张虚拟的表。</p>
<p>视图和表的区别：</p>
<table>
<thead>
<tr>
<th></th>
<th>使用方式</th>
<th></th>
<th>占用物理空间</th>
</tr>
</thead>
<tbody><tr>
<td>视图</td>
<td>增删改查，一般不做增删改</td>
<td>create view</td>
<td>不占用，仅仅保存的是sql逻辑</td>
</tr>
<tr>
<td>表</td>
<td>增删改查</td>
<td>create table</td>
<td>占用</td>
</tr>
</tbody></table>
<p>视图的好处：</p>
<p>1、sql语句提高重用性，简化复杂的sql操作，效率高。<br>2、和表实现了分离，保护数据,提高了安全性。</p>
<h4 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h4><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW  视图名</span><br><span class="line">	AS</span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure>



<h5 id="视图中数据增删改查"><a href="#视图中数据增删改查" class="headerlink" title="视图中数据增删改查"></a>视图中数据增删改查</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#1、查看视图的数据 ★</span><br><span class="line">SELECT * FROM my_v4;</span><br><span class="line">SELECT * FROM my_v1 WHERE last_name=&apos;Partners&apos;;</span><br><span class="line"></span><br><span class="line">#一般不更改视图里面的数据</span><br><span class="line">#2、插入视图的数据</span><br><span class="line">INSERT INTO my_v4(last_name,department_id) VALUES(&apos;虚竹&apos;,90);</span><br><span class="line"></span><br><span class="line">#3、修改视图的数据</span><br><span class="line">UPDATE my_v4 SET last_name =&apos;梦姑&apos; WHERE last_name=&apos;虚竹&apos;;</span><br><span class="line"></span><br><span class="line">#4、删除视图的数据</span><br><span class="line">DELETE FROM my_v4;</span><br></pre></td></tr></table></figure>



<h5 id="某些视图不能更新"><a href="#某些视图不能更新" class="headerlink" title="某些视图不能更新"></a>某些视图不能更新</h5><p>​    包含以下关键字的sql语句：分组函数、distinct、group  by、having、union或者union all<br>​    常量视图<br>​    Select中包含子查询<br>​    join<br>​    from一个不能更新的视图<br>​    where子句的子查询引用了from子句中的表</p>
<h5 id="视图的更新"><a href="#视图的更新" class="headerlink" title="视图的更新"></a>视图的更新</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#方式一：</span><br><span class="line">CREATE OR REPLACE VIEW test_v7</span><br><span class="line">AS</span><br><span class="line">SELECT last_name FROM employees</span><br><span class="line">WHERE employee_id&gt;100;</span><br><span class="line"></span><br><span class="line">#方式二:</span><br><span class="line">ALTER VIEW test_v7</span><br><span class="line">AS</span><br><span class="line">SELECT employee_id FROM employees;</span><br></pre></td></tr></table></figure>

<h5 id="视图的删除"><a href="#视图的删除" class="headerlink" title="视图的删除"></a>视图的删除</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP VIEW test_v1,test_v2,test_v3;</span><br></pre></td></tr></table></figure>

<h5 id="视图的查看"><a href="#视图的查看" class="headerlink" title="视图的查看"></a>视图的查看</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#方式1</span><br><span class="line">DESC test_v7;</span><br><span class="line">#方式2</span><br><span class="line">SHOW CREATE VIEW test_v7;</span><br></pre></td></tr></table></figure>







<h3 id="查询顺序"><a href="#查询顺序" class="headerlink" title="查询顺序"></a>查询顺序</h3><p>FROM –&gt; ON –&gt; JOIN –&gt; Where –&gt; group by –&gt; having –&gt; select –&gt; distinct –&gt; order by –&gt; limit</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>觉得不错的，打个赏呗！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="汐 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="汐 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/10/20/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/" rel="next" title="我的第一篇博客文章">
                <i class="fa fa-chevron-left"></i> 我的第一篇博客文章
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/timg.jpg"
                alt="汐" />
            
              <p class="site-author-name" itemprop="name">汐</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/Re-frain" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yinyuanyang2013@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.bilibili.com/" title="bilibili" target="_blank">bilibili</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库相关概念"><span class="nav-number">1.</span> <span class="nav-text">数据库相关概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL产品的介绍和安装"><span class="nav-number">2.</span> <span class="nav-text">MySQL产品的介绍和安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL服务的启动和停止"><span class="nav-number">2.1.</span> <span class="nav-text">MySQL服务的启动和停止</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL服务的登录和退出"><span class="nav-number">2.2.</span> <span class="nav-text">MySQL服务的登录和退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL的常见命令"><span class="nav-number">2.3.</span> <span class="nav-text">MySQL的常见命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL的语法规范"><span class="nav-number">2.4.</span> <span class="nav-text">MySQL的语法规范</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL的语言分类"><span class="nav-number">3.</span> <span class="nav-text">SQL的语言分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DQL语言的学习"><span class="nav-number">3.1.</span> <span class="nav-text">DQL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础查询"><span class="nav-number">3.1.1.</span> <span class="nav-text">基础查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#使用别名"><span class="nav-number">3.1.1.1.</span> <span class="nav-text">使用别名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#去除重复"><span class="nav-number">3.1.1.2.</span> <span class="nav-text">去除重复</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#号"><span class="nav-number">3.1.1.3.</span> <span class="nav-text">+号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#concat实现拼接操作"><span class="nav-number">3.1.1.4.</span> <span class="nav-text">concat实现拼接操作</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件查询"><span class="nav-number">3.1.2.</span> <span class="nav-text">条件查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、条件表达式"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">一、条件表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、逻辑表达式"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">二、逻辑表达式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#三、模糊查询"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">三、模糊查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#四、关键字-between-and"><span class="nav-number">3.1.2.4.</span> <span class="nav-text">四、关键字  between  and</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#五、关键字-in"><span class="nav-number">3.1.2.5.</span> <span class="nav-text">五、关键字 in</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#六、关键字-is-null-is-not-null"><span class="nav-number">3.1.2.6.</span> <span class="nav-text">六、关键字  is null  , is not null</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#七、安全等于-lt-gt"><span class="nav-number">3.1.2.7.</span> <span class="nav-text">七、安全等于 &lt;=&gt;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序查询"><span class="nav-number">3.1.3.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见函数"><span class="nav-number">3.1.4.</span> <span class="nav-text">常见函数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、单行函数"><span class="nav-number">3.1.4.1.</span> <span class="nav-text">一、单行函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、分组函数"><span class="nav-number">3.1.4.2.</span> <span class="nav-text">二、分组函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组查询"><span class="nav-number">3.1.5.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多表连接查询"><span class="nav-number">3.1.6.</span> <span class="nav-text">多表连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一、分类"><span class="nav-number">3.1.6.1.</span> <span class="nav-text">一、分类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#二、笛卡尔乘积"><span class="nav-number">3.1.6.2.</span> <span class="nav-text">二、笛卡尔乘积</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#三、sql92标准"><span class="nav-number">3.1.6.3.</span> <span class="nav-text">三、sql92标准</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#四、sql99标准-推荐使用"><span class="nav-number">3.1.6.4.</span> <span class="nav-text">四、sql99标准[推荐使用]</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询"><span class="nav-number">3.1.7.</span> <span class="nav-text">子查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分页查询"><span class="nav-number">3.1.8.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#联合查询"><span class="nav-number">3.1.9.</span> <span class="nav-text">联合查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DML语言的学习"><span class="nav-number">3.2.</span> <span class="nav-text">DML语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入"><span class="nav-number">3.2.1.</span> <span class="nav-text">插入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改"><span class="nav-number">3.2.2.</span> <span class="nav-text">修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除"><span class="nav-number">3.2.3.</span> <span class="nav-text">删除</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#方式1：delete语句"><span class="nav-number">3.2.3.1.</span> <span class="nav-text">方式1：delete语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#方式2：truncate语句"><span class="nav-number">3.2.3.2.</span> <span class="nav-text">方式2：truncate语句</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DDL语言的学习"><span class="nav-number">3.3.</span> <span class="nav-text">DDL语言的学习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#库和表的管理"><span class="nav-number">3.3.1.</span> <span class="nav-text">库和表的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#库的管理"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">库的管理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#表的管理"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">表的管理</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见的数据类型"><span class="nav-number">3.3.2.</span> <span class="nav-text">常见的数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见约束"><span class="nav-number">3.3.3.</span> <span class="nav-text">常见约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库事务"><span class="nav-number">3.4.</span> <span class="nav-text">数据库事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#特点-ACID"><span class="nav-number">3.4.1.</span> <span class="nav-text">特点(ACID):</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#事务的分类"><span class="nav-number">3.4.2.</span> <span class="nav-text">事务的分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用到的关键字"><span class="nav-number">3.4.3.</span> <span class="nav-text">使用到的关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#事务的隔离级别"><span class="nav-number">3.4.4.</span> <span class="nav-text">事务的隔离级别</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#事务并发问题如何发生"><span class="nav-number">3.4.4.1.</span> <span class="nav-text">事务并发问题如何发生</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#事务的并发问题有哪些"><span class="nav-number">3.4.4.2.</span> <span class="nav-text">事务的并发问题有哪些</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#1、脏读"><span class="nav-number">3.4.4.3.</span> <span class="nav-text">1、脏读</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、不可重复读"><span class="nav-number">3.4.4.4.</span> <span class="nav-text">2、不可重复读</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3、幻读"><span class="nav-number">3.4.4.5.</span> <span class="nav-text">3、幻读</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#不可重复读和脏读的区别是"><span class="nav-number">3.4.4.6.</span> <span class="nav-text">不可重复读和脏读的区别是:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#如何避免事务的并发问题"><span class="nav-number">3.4.4.7.</span> <span class="nav-text">如何避免事务的并发问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置隔离级别"><span class="nav-number">3.4.4.8.</span> <span class="nav-text">设置隔离级别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看隔离级别"><span class="nav-number">3.4.4.9.</span> <span class="nav-text">查看隔离级别</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图"><span class="nav-number">3.5.</span> <span class="nav-text">视图</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的创建"><span class="nav-number">3.5.1.</span> <span class="nav-text">视图的创建</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#视图中数据增删改查"><span class="nav-number">3.5.1.1.</span> <span class="nav-text">视图中数据增删改查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#某些视图不能更新"><span class="nav-number">3.5.1.2.</span> <span class="nav-text">某些视图不能更新</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#视图的更新"><span class="nav-number">3.5.1.3.</span> <span class="nav-text">视图的更新</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#视图的删除"><span class="nav-number">3.5.1.4.</span> <span class="nav-text">视图的删除</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#视图的查看"><span class="nav-number">3.5.1.5.</span> <span class="nav-text">视图的查看</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询顺序"><span class="nav-number">3.6.</span> <span class="nav-text">查询顺序</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">汐</span>

  
</div>

<!-- 
  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>
 -->



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访问数 <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量 <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  







  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/three.min.js"></script>
  

  
  
    <script type="text/javascript" src="/lib/three/canvas_lines.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'zIVLxIyOFlncLGySiR8k3oIJ-gzGzoHsz',
        appKey: 'JYpXhAQTkGIlQXErg8Lih5QY',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

<!--崩溃欺骗-->
<script type="text/javascript" src="/js/src/crash_cheat.js"></script>